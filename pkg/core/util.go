/*
Copyright (c) 2026 Jared Nishikawa

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/

// the core package provides basic functionality to all the major components of the code
package core

import (
	"fmt"
	"math/rand"
	"strings"
	"sync/atomic"
	"time"

	"github.com/google/uuid"
)

// Sanitize ensures strings only contain letters and numbers
func Sanitize(s string) string {
	sb := strings.Builder{}
	for _, c := range s {
		if c >= 'A' && c <= 'Z' {
			sb.WriteRune(c + 32)
		}
		if (c >= '0' && c <= '9') ||
			(c >= 'a' && c <= 'z') || c == '-' {
			sb.WriteRune(c)
		}
	}
	return sb.String()
}

// UUID4 makes and sanitizes a new uuid
func UUID4() string {
	r, _ := uuid.NewRandom()
	s := r.String()
	return Sanitize(s)
}

var counter int64

func RandomBoardName() string {
	// collisions could (theoretically) happen at the same nano second
	seed := time.Now().UnixNano()
	// so add a counter
	c := atomic.AddInt64(&counter, 1)
	r := rand.New(rand.NewSource(seed + c))
	adjectiveIndex := r.Intn(len(adjectives))
	colorIndex := r.Intn(len(colors))
	animalIndex := r.Intn(len(animals))
	adjective := adjectives[adjectiveIndex]
	color := colors[colorIndex]
	animal := animals[animalIndex]
	return fmt.Sprintf("%s-%s-%s", adjective, color, animal)
}

var animals = []string{"cat", "cattle", "dog", "donkey", "goat", "horse", "pig", "rabbit", "aardvark", "aardwolf", "albatross", "alligator", "alpaca", "amphibian", "anaconda", "angelfish", "anglerfish", "ant", "anteater", "antelope", "antlion", "ape", "aphid", "armadillo", "asp", "baboon", "badger", "bandicoot", "barnacle", "barracuda", "basilisk", "bass", "bat", "bear", "beaver", "bedbug", "bee", "beetle", "bird", "bison", "blackbird", "boa", "boar", "bobcat", "bobolink", "bonobo", "booby", "bovid", "bug", "butterfly", "buzzard", "camel", "canid", "capybara", "cardinal", "caribou", "carp", "cat", "catshark", "caterpillar", "catfish", "cattle", "centipede", "cephalopod", "chameleon", "cheetah", "chickadee", "chicken", "chimpanzee", "chinchilla", "chipmunk", "clam", "clownfish", "cobra", "cockroach", "cod", "condor", "constrictor", "coral", "cougar", "cow", "coyote", "crab", "crane", "crawdad", "crayfish", "cricket", "crocodile", "crow", "cuckoo", "cicada", "damselfly", "deer", "dingo", "dinosaur", "dog", "dolphin", "donkey", "dormouse", "dove", "dragonfly", "dragon", "duck", "eagle", "earthworm", "earwig", "echidna", "eel", "egret", "elephant", "elk", "emu", "ermine", "falcon", "ferret", "finch", "firefly", "fish", "flamingo", "flea", "fly", "flyingfish", "fowl", "fox", "frog", "gamefowl", "galliform", "gazelle", "gecko", "gerbil", "gibbon", "giraffe", "goat", "goldfish", "goose", "gopher", "gorilla", "grasshopper", "grouse", "guan", "guanaco", "guineafowl", "gull", "guppy", "haddock", "halibut", "hamster", "hare", "harrier", "hawk", "hedgehog", "heron", "herring", "hippopotamus", "hookworm", "hornet", "horse", "hoverfly", "hummingbird", "hyena", "iguana", "impala", "jackal", "jaguar", "jay", "jellyfish", "junglefowl", "kangaroo", "kingfisher", "kite", "kiwi", "koala", "koi", "krill", "ladybug", "lamprey", "landfowl", "lark", "leech", "lemming", "lemur", "leopard", "leopon", "limpet", "lion", "lizard", "llama", "lobster", "locust", "loon", "louse", "lungfish", "lynx", "macaw", "mackerel", "magpie", "mammal", "manatee", "mandrill", "marlin", "marmoset", "marmot", "marsupial", "marten", "mastodon", "meadowlark", "meerkat", "mink", "minnow", "mite", "mockingbird", "mole", "mollusk", "mongoose", "monkey", "moose", "mosquito", "moth", "mouse", "mule", "muskox", "narwhal", "newt", "nightingale", "ocelot", "octopus", "opossum", "orangutan", "orca", "ostrich", "otter", "owl", "ox", "panda", "panther", "parakeet", "parrot", "parrotfish", "partridge", "peacock", "peafowl", "pelican", "penguin", "perch", "pheasant", "pig", "pigeon", "pike", "pinniped", "piranha", "planarian", "platypus", "pony", "porcupine", "porpoise", "possum", "prawn", "primate", "ptarmigan", "puffin", "puma", "python", "quail", "quelea", "quokka", "rabbit", "raccoon", "rat", "rattlesnake", "raven", "reindeer", "reptile", "rhinoceros", "roadrunner", "rodent", "rook", "rooster", "roundworm", "sailfish", "salamander", "salmon", "sawfish", "scallop", "scorpion", "seahorse", "shark", "sheep", "shrew", "shrimp", "silkworm", "silverfish", "skink", "skunk", "sloth", "slug", "smelt", "snail", "snake", "snipe", "sole", "sparrow", "spider", "spoonbill", "squid", "squirrel", "starfish", "stingray", "stoat", "stork", "sturgeon", "swallow", "swan", "swift", "swordfish", "swordtail", "tahr", "takin", "tapir", "tarantula", "tarsier", "termite", "tern", "thrush", "tick", "tiger", "tiglon", "toad", "tortoise", "toucan", "trout", "tuna", "turkey", "turtle", "tyrannosaurus", "urial", "vicuna", "viper", "vole", "vulture", "wallaby", "walrus", "wasp", "warbler", "weasel", "whale", "whippet", "whitefish", "wildcat", "wildebeest", "wildfowl", "wolf", "wolverine", "wombat", "woodpecker", "worm", "wren", "xerinae", "yak", "zebra", "alpaca", "cat", "cattle", "chicken", "dog", "donkey", "ferret", "gayal", "goldfish", "guppy", "horse", "koi", "llama", "sheep", "yak"}

var adjectives = []string{"able", "abundant", "accurate", "active", "adaptable", "adventurous", "agile", "agreeable", "alert", "alive", "amazing", "ancient", "angelic", "anxious", "arctic", "artful", "artistic", "ashamed", "aspiring", "athletic", "attentive", "attractive", "austere", "automatic", "avid", "babyish", "balanced", "bare", "basic", "beautiful", "beloved", "best", "better", "big", "billowy", "bitter", "bland", "blank", "blaring", "bleak", "blessed", "blind", "blissful", "blithe", "blue", "blunt", "bold", "bouncy", "brave", "bright", "brilliant", "brisk", "broken", "bronze", "brooding", "brown", "brutal", "bubbly", "buoyant", "burly", "busy", "calm", "capable", "carefree", "careful", "caring", "casual", "cautious", "celestial", "centered", "certain", "charming", "cheerful", "chief", "chilly", "chirpy", "chivalrous", "chosen", "circular", "civil", "classic", "clean", "clear", "clever", "close", "cloudy", "coarse", "cold", "colorful", "colossal", "comfy", "common", "compact", "complete", "complex", "confident", "constant", "content", "cool", "copper", "courageous", "cozy", "crafty", "craggy", "cramped", "crazy", "creative", "crispy", "critical", "crooked", "crowded", "crucial", "cruel", "crystal", "cuddly", "curious", "curly", "curved", "cute", "cylindrical", "dainty", "damp", "daring", "dark", "dashing", "dazzling", "deadly", "dear", "decent", "deep", "defiant", "delicate", "delicious", "delightful", "dense", "dependent", "desert", "detailed", "determined", "devoted", "diligent", "dim", "direct", "distant", "distinct", "diverse", "divine", "dizzy", "dopey", "dormant", "double", "dramatic", "dreary", "dry", "dual", "dull", "eager", "early", "earnest", "earthy", "easy", "ecstatic", "edgy", "efficient", "elastic", "elder", "elegant", "elite", "emboldened", "empty", "enchanted", "endless", "energetic", "equal", "essential", "eternal", "ethical", "even", "evergreen", "everyday", "evil", "exact", "excellent", "excited", "exotic", "expensive", "expert", "extra", "fabled", "faint", "fair", "faithful", "fancy", "far", "fascinating", "fast", "fatal", "fearless", "feisty", "feline", "fervent", "festive", "fierce", "fiery", "final", "fine", "firm", "first", "fit", "flaky", "flat", "flawless", "fleet", "flexible", "fluffy", "fluid", "flying", "focal", "fond", "foolish", "forceful", "formal", "fortunate", "fragile", "fragrant", "frail", "frank", "free", "fresh", "friendly", "frigid", "frisky", "frosty", "frozen", "frugal", "full", "fun", "funny", "furious", "fuzzy", "gentle", "giant", "giddy", "gifted", "gigantic", "giving", "glacial", "glamorous", "gleaming", "glib", "glimmering", "glistening", "glittering", "global", "gloomy", "glorious", "glowing", "golden", "good", "gorgeous", "graceful", "grand", "granular", "grateful", "grave", "gray", "great", "green", "gregarious", "grim", "gritty", "groovy", "gross", "growing", "gruesome", "grumpy", "guilty", "hairy", "handy", "happy", "hard", "harmonious", "harsh", "hasty", "haunting", "healthy", "heartfelt", "hearty", "heavy", "helpful", "heroic", "hidden", "high", "hilarious", "hollow", "holy", "honest", "honored", "hopeful", "horned", "hot", "huge", "humble", "humid", "hungry", "icy", "ideal", "idle", "ignorant", "ill", "illustrious", "impartial", "immense", "immortal", "immune", "impartial", "imperfect", "important", "impossible", "impressive", "inborn", "incisive", "infinite", "innocent", "inquisitive", "instant", "intense", "intent", "internal", "intrepid", "intricate", "invincible", "invisible", "irate", "iron", "jagged", "jazzy", "jealous", "jolly", "jovial", "joyful", "joyous", "judicious", "juicy", "jumpy", "keen", "khaki", "kind", "kindly", "kingly", "knobby", "knowing", "known", "lacy", "large", "lasting", "late", "lavish", "lawful", "lazy", "leafy", "lean", "learned", "left", "legendary", "leggy", "legitimate", "light", "likely", "limber", "limited", "lively", "living", "lone", "lonely", "long", "loose", "lost", "loud", "lovable", "lovely", "loyal", "lucid", "lucky", "lunar", "lush", "lustrous", "luxurious", "mad", "magenta", "magical", "magnificent", "major", "mammoth", "mangy", "marbled", "marvelous", "massive", "masterful", "mature", "mean", "measly", "meek", "mellow", "melodic", "melted", "merry", "mighty", "mild", "milky", "mimic", "mini", "minimal", "minor", "minty", "miraculous", "miserly", "misty", "mixed", "mobile", "modern", "modest", "molten", "monumental", "moral", "morning", "mossy", "mostly", "motionless", "mountainous", "muddy", "muffled", "mundane", "murky", "mushy", "musical", "mute", "mysterious", "mythic", "naive", "narrow", "nasty", "natural", "nautical", "neat", "near", "needy", "nervous", "new", "next", "nice", "nimble", "noble", "noisy", "normal", "notable", "novel", "numb", "obedient", "obscure", "observant", "oceanic", "odd", "offbeat", "official", "old", "olive", "ominous", "opaque", "open", "optimal", "orange", "orderly", "organic", "original", "ornate", "other", "oval", "overdue", "pale", "pampered", "panicked", "parallel", "paramount", "partial", "passionate", "pastel", "patient", "peaceful", "peachy", "pearly", "perfect", "perky", "permanent", "perplexing", "personal", "petite", "phantom", "philosophic", "physical", "piercing", "pink", "pitched", "plain", "playful", "pleasant", "plentiful", "pliant", "plucky", "plump", "poetic", "pointed", "polished", "polite", "poor", "popular", "portly", "positive", "powerful", "precious", "precise", "premium", "present", "pretty", "prime", "princely", "pristine", "private", "prized", "prompt", "proper", "proud", "prudent", "psychic", "public", "puffy", "pulsing", "pure", "purple", "pushy", "quick", "quiet", "quintessential", "quirky", "radiant", "ragged", "rainy", "rapid", "rare", "raspy", "rational", "raw", "ready", "real", "rebellious", "recent", "reckless", "redeemed", "red", "reliable", "remarkable", "remote", "renewed", "resilient", "resolute", "rested", "rich", "right", "rigid", "risky", "ritual", "robust", "rocky", "rosy", "rough", "round", "royal", "rugged", "rural", "rustic", "rusty", "sacred", "sad", "safe", "salty", "same", "sandy", "sane", "sarcastic", "sassy", "scarce", "scared", "scary", "scenic", "scholarly", "scientific", "scorching", "scrappy", "secure", "select", "selfish", "sensible", "serene", "serious", "shabby", "shadowy", "shallow", "sharp", "shimmering", "shiny", "shivering", "short", "showy", "shrill", "shy", "silent", "silky", "silly", "silver", "simple", "sincere", "singular", "sizzling", "skillful", "skinny", "sleepy", "slender", "slimy", "slippery", "slow", "small", "smart", "smelly", "smiling", "smooth", "snappy", "sneaky", "snowy", "snug", "social", "soft", "solemn", "solid", "somber", "soothing", "sophisticated", "sordid", "sorry", "sour", "sparkling", "special", "speedy", "spicy", "spiffy", "spiky", "spirited", "spiritual", "splendid", "spooky", "spotless", "spotted", "spry", "square", "squeaky", "stable", "stacked", "stained", "stale", "standard", "starry", "steadfast", "steady", "steep", "stern", "sticky", "stiff", "still", "stormy", "stout", "straight", "strange", "strategic", "strict", "strong", "stunning", "sturdy", "subtle", "successful", "sudden", "sugary", "sunny", "super", "superb", "supple", "supreme", "sure", "surly", "surprising", "svelte", "sweet", "swift", "tall", "tame", "tangy", "tart", "tasty", "teal", "teeming", "tense", "tender", "terrible", "terrific", "testy", "thankful", "thick", "thin", "thirsty", "thoughtful", "thrifty", "thundering", "tidy", "timid", "tiny", "tired", "toasty", "together", "tolerant", "tough", "towering", "toxic", "tranquil", "tragic", "tremendous", "tricky", "triple", "trivial", "true", "trusting", "trustworthy", "tubby", "turbulent", "twinkling", "typical", "ultimate", "unaware", "uncommon", "underground", "uneven", "unified", "unique", "united", "unknown", "untidy", "unusual", "unwavering", "upbeat", "upright", "urban", "useful", "usual", "valiant", "vast", "velvety", "verdant", "vibrant", "vicious", "victorious", "vigilant", "vigorous", "violent", "violet", "virtual", "visible", "vital", "vivid", "vocal", "warm", "wary", "wasteful", "watery", "wealthy", "weak", "wearied", "weary", "weathered", "webbed", "wee", "weighty", "weird", "welcome", "wet", "whimsical", "whiny", "white", "whole", "wicked", "wide", "wild", "willing", "windy", "winged", "winning", "wiry", "wise", "wistful", "witty", "wizardly", "woeful", "wonderful", "wooden", "woolly", "worldly", "worthy", "wound", "woven", "wrathful", "wry", "yawning", "yellow", "young", "youthful", "yummy", "zealous", "zesty", "zigzag", "zippy", "zonal", "zoological"}

var colors = []string{"alabaster", "amber", "amethyst", "apricot", "aqua", "aquamarine", "ash", "azure", "beige", "berry", "black", "blonde", "blue", "blush", "bronze", "brown", "burgundy", "butter", "caramel", "carnation", "cedar", "cerulean", "charcoal", "cherry", "chestnut", "cinnamon", "cobalt", "copper", "coral", "cream", "crimson", "cyan", "daffodil", "denim", "ebony", "emerald", "fawn", "fern", "flax", "fog", "forest", "garnet", "ginger", "gold", "goldenrod", "graphite", "gray", "green", "hazel", "honey", "indigo", "ivory", "jade", "jet", "khaki", "lavender", "lemon", "lilac", "lime", "magenta", "mahogany", "marigold", "mauve", "mint", "mocha", "moss", "mustard", "navy", "ochre", "olive", "onyx", "opal", "orange", "orchid", "peach", "pearl", "periwinkle", "pink", "platinum", "plum", "poppy", "pumpkin", "purple", "red", "rose", "ruby", "rust", "saffron", "sage", "sand", "sapphire", "scarlet", "seafoam", "sepia", "silver", "sky", "slate", "snow", "spruce", "tan", "teal", "thistle", "turquoise", "ultramarine", "violet", "white", "willow", "wine", "yellow"}
